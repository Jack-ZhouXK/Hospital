{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport $ from \"jquery\";\nexport default {\n  data: function data() {\n    return {\n      //这是登录表单的数据绑定对象\n      loginForm: {\n        username: \"\",\n        password: \"\"\n      },\n      // 注册表单的数据绑定对象\n      regForm: {\n        username: \"\",\n        password: \"\",\n        name: \"\"\n      },\n      dialogVisible: true,\n      ////表单验证规则对象,数据的校验规则\n      loginFormRules: {\n        //验证用户名是否合法\n        username: [{\n          required: true,\n          message: \"请输入用户名\",\n          trigger: \"blur\"\n        }, {\n          min: 3,\n          max: 16,\n          message: \"长度在 3 到 16 个字符\",\n          trigger: \"blur\"\n        }],\n        //验证密码是否合法\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }, {\n          min: 6,\n          max: 15,\n          message: \"长度在 6 到 15 个字符\",\n          trigger: \"blur\"\n        }],\n        // 验证姓名是否合法\n        name: [{\n          required: true,\n          message: \"请输入姓名\",\n          trigger: \"blur\"\n        }, {\n          min: 2,\n          max: 5,\n          message: \"长度在 2 到 5 个字符\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    //登录按钮表单预验证\n    login: function login() {\n      var _this = this;\n\n      //发送请求,发生Promise解决方案把参数变成异步,该参数等待即可\n      this.$http.post(\"user/login\", this.loginForm).then(function (res) {\n        if (res.data.status != 200) {\n          return _this.$message.error('登录失败,账号或密码错误');\n        }\n\n        _this.$message.success('登录成功');\n\n        sessionStorage.setItem('userId', res.data.id);\n        sessionStorage.setItem('username', res.data.username);\n        console.log(res.data);\n\n        if (res.data.role == 0) {\n          //通过编程式导航跳转到后台首页,路由地址为管理员管理页面\n          return _this.$router.push(\"/adminManage\");\n        }\n\n        if (res.data.role == 1) {// 跳转医生页面 后期完善\n        }\n\n        if (res.data.role == 2) {// 跳转患者界面 后期完善\n        }\n      });\n    },\n    //注册验证\n    register: function register() {\n      var _this2 = this;\n\n      this.$http.post(\"user/addCommoner\", this.regForm).then(function (res) {\n        if (res.data.status != 200) {\n          return _this2.$message.error('注册失败,' + res.data.msg);\n        }\n\n        if (res.data.status == 200) {\n          _this2.$message.success('注册成功');\n        }\n      });\n    },\n    // 表单切换功能\n    Registered_button: function Registered_button() {\n      $(\".Login_div\").animate({\n        width: \"0\",\n        opacity: \"0\"\n      });\n      $(\".Registered_div\").animate({\n        width: \"50%\",\n        opacity: \"1\"\n      });\n      $(\"#Switch_Registered\").animate({\n        opacity: \"0\"\n      });\n      $(\"#Switch_Login\").animate({\n        opacity: \"1\"\n      });\n      $(\"#Switch_Registered\").slideUp();\n      $(\"#Switch_Login\").slideDown();\n    },\n    // 表单切换功能\n    Login_button: function Login_button() {\n      $(\".Registered_div\").animate({\n        width: \"0\",\n        opacity: \"0\"\n      });\n      $(\".Login_div\").animate({\n        width: \"50%\",\n        opacity: \"1\"\n      });\n      $(\"#Switch_Login\").animate({\n        opacity: \"0\"\n      });\n      $(\"#Switch_Registered\").animate({\n        opacity: \"1\"\n      });\n      $(\"#Switch_Login\").slideUp();\n      $(\"#Switch_Registered\").slideDown(500);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACAA,MADA,kBACA;AACA;AACA;AACAC;AACAC,oBADA;AAEAC;AAFA,OAFA;AAMA;AACAC;AACAF,oBADA;AAEAC,oBAFA;AAGAE;AAHA,OAPA;AAYAC,yBAZA;AAaA;AACAC;AACA;AACAL,mBACA;AAAAM;AAAAC;AAAAC;AAAA,SADA,EAEA;AACAC,gBADA;AAEAC,iBAFA;AAGAH,mCAHA;AAIAC;AAJA,SAFA,CAFA;AAWA;AACAP,mBACA;AAAAK;AAAAC;AAAAC;AAAA,SADA,EAEA;AACAC,gBADA;AAEAC,iBAFA;AAGAH,mCAHA;AAIAC;AAJA,SAFA,CAZA;AAqBA;AACAL,eACA;AAAAG;AAAAC;AAAAC;AAAA,SADA,EAEA;AACAC,gBADA;AAEAC,gBAFA;AAGAH,kCAHA;AAIAC;AAJA,SAFA;AAtBA;AAdA;AA+CA,GAjDA;AAkDAG;AACA;AACAC,SAFA,mBAEA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;;AACAC;AACAA;AACAC;;AACA;AACA;AACA;AACA;;AACA,iCACA;AACA;;AACA,iCACA;AACA;AACA,OAlBA;AAmBA,KAvBA;AAwBA;AACAC,YAzBA,sBAyBA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,OAPA;AAQA,KAlCA;AAmCA;AACAC,qBApCA,+BAoCA;AACAC;AAAAC;AAAAC;AAAA;AACAF;AAAAC;AAAAC;AAAA;AACAF;AAAAE;AAAA;AACAF;AAAAE;AAAA;AACAF;AACAA;AACA,KA3CA;AA4CA;AACAG,gBA7CA,0BA6CA;AACAH;AAAAC;AAAAC;AAAA;AACAF;AAAAC;AAAAC;AAAA;AACAF;AAAAE;AAAA;AACAF;AAAAE;AAAA;AACAF;AACAA;AACA;AApDA;AAlDA","names":["data","loginForm","username","password","regForm","name","dialogVisible","loginFormRules","required","message","trigger","min","max","methods","login","sessionStorage","console","register","Registered_button","$","width","opacity","Login_button"],"sourceRoot":"src/components/login","sources":["loginUser.vue"],"sourcesContent":["<template>\n  <body>\n    <h2 class=\"title\">好医生在线预约问诊网站</h2>\n    <div class=\"main\">\n      <div class=\"Login_div\">\n        <el-form\n          ref=\"loginFormRef\"\n          class=\"login_form\"\n          :model=\"loginForm\"\n          :rules=\"loginFormRules\"\n        >\n          <h1>登录</h1>\n          <span>请登录您的账号</span>\n          <div class=\"eneter\">\n            <el-form-item prop=\"username\">\n              <el-input\n                prefix-icon=\"el-icon-user\"\n                v-model=\"loginForm.username\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n              <el-input\n                prefix-icon=\"el-icon-goods\"\n                v-model=\"loginForm.password\"\n                type=\"password\"\n              ></el-input>\n            </el-form-item>\n          </div>\n          <a href=\"#\">忘记密码？</a>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"login\" class=\"submit_button\"\n              >登录</el-button\n            >\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"Options_div\">\n        <div id=\"Switch_Registered\">\n          <h1>还没有账号？</h1>\n          <p>立即注册，和我们一起开始旅程吧</p>\n          <button id=\"Registered_button\" @click=\"Registered_button\">\n            前往注册\n          </button>\n        </div>\n        <div id=\"Switch_Login\">\n          <h1>已有账号？</h1>\n          <p>请使用您的帐号进行登录</p>\n          <button id=\"Login_button\" @click=\"Login_button\">前往登录</button>\n        </div>\n      </div>\n      <div class=\"Registered_div\">\n        <el-form\n          ref=\"loginFormRef\"\n          class=\"login_form\"\n          :model=\"regForm\"\n          :rules=\"loginFormRules\"\n        >\n          <h1>注册</h1>\n          <span>注册您的第一个账号</span>\n          <div class=\"eneter\">\n            <el-form-item prop=\"username\">\n              <el-input\n                prefix-icon=\"el-icon-user\"\n                v-model=\"regForm.username\"\n                placeholder=\"请输入注册用户名\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n              <el-input\n                prefix-icon=\"el-icon-goods\"\n                v-model=\"regForm.password\"\n                type=\"password\"\n                placeholder=\"请输入注册密码\"\n              >\n              </el-input>\n            </el-form-item>\n            <el-form-item prop=\"name\">\n              <el-input\n                prefix-icon=\"el-icon-s-custom\"\n                v-model=\"regForm.name\"\n                placeholder=\"姓名\"\n              >\n              </el-input>\n            </el-form-item>\n          </div>\n          <button class=\"submit_button\" @click=\"register\">注册</button>\n        </el-form>\n      </div>\n    </div>\n  </body>\n</template>\n\n\n<script>\nimport $ from \"jquery\";\nexport default {\n  data() {\n    return {\n      //这是登录表单的数据绑定对象\n      loginForm: {\n        username: \"\",\n        password: \"\",\n      },\n      // 注册表单的数据绑定对象\n      regForm: {\n        username: \"\",\n        password: \"\",\n        name: \"\",\n      },\n      dialogVisible:true,\n      ////表单验证规则对象,数据的校验规则\n      loginFormRules: {\n        //验证用户名是否合法\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          {\n            min: 3,\n            max: 16,\n            message: \"长度在 3 到 16 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        //验证密码是否合法\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 15,\n            message: \"长度在 6 到 15 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        // 验证姓名是否合法\n          name: [\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 5,\n            message: \"长度在 2 到 5 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    //登录按钮表单预验证\n    login() {\n      //发送请求,发生Promise解决方案把参数变成异步,该参数等待即可\n      this.$http.post(\"user/login\", this.loginForm).then((res) => {\n        if(res.data.status != 200){\n           return this.$message.error('登录失败,账号或密码错误')\n        }\n         this.$message.success('登录成功')\n         sessionStorage.setItem('userId',res.data.id)\n         sessionStorage.setItem('username',res.data.username)\n         console.log(res.data);\n        if(res.data.role==0){\n            //通过编程式导航跳转到后台首页,路由地址为管理员管理页面\n            return this.$router.push(\"/adminManage\");\n        }\n        if(res.data.role==1){\n            // 跳转医生页面 后期完善\n        }\n        if(res.data.role==2){\n           // 跳转患者界面 后期完善\n        }\n      });\n    },\n    //注册验证\n    register() {\n      this.$http.post(\"user/addCommoner\", this.regForm).then((res) => {\n        if(res.data.status != 200){\n           return this.$message.error('注册失败,'+res.data.msg)\n        }\n          if(res.data.status == 200){\n            this.$message.success('注册成功')\n        }\n      });\n    },\n    // 表单切换功能\n    Registered_button() {\n      $(\".Login_div\").animate({ width: \"0\", opacity: \"0\" });\n      $(\".Registered_div\").animate({ width: \"50%\", opacity: \"1\" });\n      $(\"#Switch_Registered\").animate({ opacity: \"0\" });\n      $(\"#Switch_Login\").animate({ opacity: \"1\" });\n      $(\"#Switch_Registered\").slideUp();\n      $(\"#Switch_Login\").slideDown();\n    },\n    // 表单切换功能\n    Login_button() {\n      $(\".Registered_div\").animate({ width: \"0\", opacity: \"0\" });\n      $(\".Login_div\").animate({ width: \"50%\", opacity: \"1\" });\n      $(\"#Switch_Login\").animate({ opacity: \"0\" });\n      $(\"#Switch_Registered\").animate({ opacity: \"1\" });\n      $(\"#Switch_Login\").slideUp();\n      $(\"#Switch_Registered\").slideDown(500);\n    },\n  },\n};\n</script>\n\n\n<style lang=\"less\" scoped>\n* {\n  box-sizing: border-box;\n}\ndiv {\n  display: block;\n}\nbody {\n  // background: url(../../assets/logo.png) no-repeat center center;\n  background-size: cover;\n  background-attachment: fixed;\n  // background: linear-gradient(antiquewhite, rgb(135, 199, 185));\n}\nbutton {\n  outline: none;\n}\nh1 {\n  font-weight: bold;\n  margin-top: 15%;\n}\nform {\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  padding: 0 50px;\n  height: 100%;\n  text-align: center;\n}\ninput {\n  background: #eee;\n  border: none;\n  padding: 12px 15px;\n  margin: 8px 0;\n  width: 100%;\n  outline: none;\n}\na {\n  color: black;\n  font-size: 15px;\n  text-decoration: none;\n  margin: 20px 0;\n}\n.main {\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n  position: relative;\n  display: flex;\n  overflow: hidden;\n  width: 800px;\n  height: 480px;\n  max-width: 100%;\n  min-height: 480px;\n  margin: 0 auto;\n  top: calc(50% - 240px);\n}\n.title {\n  width: 30%;\n  position: absolute;\n  top: 10%;\n  left: calc(43%);\n  margin-top: 0;\n}\n.Login_div {\n  background: #fff;\n  width: 50%;\n  height: 100%;\n  opacity: 1;\n  text-align: center;\n}\n.Options_div {\n  background: #fff;\n  background-color: #ff445e;\n  width: 50%;\n  height: 100%;\n  color: #fff;\n  text-align: center;\n}\n.Options_div h1 {\n  margin: 30% 0 30px 0;\n}\n.Options_div span {\n  font-size: 15px;\n  letter-spacing: 1px;\n}\n.Options_div button {\n  background: transparent;\n  border: 1px solid #fff;\n  border-radius: 20px;\n  color: #fff;\n  font-size: 12px;\n  font-weight: bold;\n  padding: 12px 45px;\n  letter-spacing: 5px;\n  margin-top: 8%;\n}\n.Registered_div {\n  background: #fff;\n  width: 0;\n  height: 100%;\n  opacity: 0;\n}\n.Registered_div .submit_button {\n  margin-top: 5%;\n}\n.eneter {\n  margin-top: 10%;\n}\n.submit_button {\n  border-radius: 20px;\n  border: 1px solid #ff4b2b;\n  background: #ff4b2b;\n  color: #fff;\n  font-size: 12px;\n  font-weight: bold;\n  padding: 12px 45px;\n  letter-spacing: 5px;\n}\n#Switch_Registered {\n  width: 100%;\n  height: 100%;\n  opacity: 1;\n}\n#Switch_Login {\n  width: 100%;\n  height: 100%;\n  display: none;\n  opacity: 0;\n}\n</style>"]},"metadata":{},"sourceType":"module"}