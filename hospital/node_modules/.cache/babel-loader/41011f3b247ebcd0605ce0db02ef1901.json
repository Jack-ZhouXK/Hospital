{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ZXK/Desktop/hospital/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport $ from 'jquery';\nexport default {\n  data: function data() {\n    return {\n      //这是登录表单的数据绑定对象\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      // 注册表单的数据绑定对象\n      regForm: {\n        username: '',\n        password: '',\n        name: ''\n      },\n      ////表单验证规则对象,数据的校验规则\n      loginFormRules: {\n        //验证用户名是否合法\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 10,\n          message: '长度在 3 到 10 个字符',\n          trigger: 'blur'\n        }],\n        //验证密码是否合法\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 15,\n          message: '长度在 6 到 15 个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    //登录按钮表单预验证\n    login: function (_login) {\n      function login() {\n        return _login.apply(this, arguments);\n      }\n\n      login.toString = function () {\n        return _login.toString();\n      };\n\n      return login;\n    }(function () {\n      var _this = this;\n\n      console.log(login);\n      this.$refs.loginFormRef.validate( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(valid) {\n          var _yield$_this$$http$po, res;\n\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (valid) {\n                    _context.next = 2;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\");\n\n                case 2:\n                  _context.next = 4;\n                  return _this.$http.post('user/login', _this.loginForm);\n\n                case 4:\n                  _yield$_this$$http$po = _context.sent;\n                  res = _yield$_this$$http$po.data;\n\n                  if (res.success) {\n                    _context.next = 8;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\", _this.$message.error('登录失败'));\n\n                case 8:\n                  _this.$message.success('登录成功'); //保存到sessionStroge中,当前浏览器打开时候生效\n                  // window.sessionStorage.setItem('token', res.message)\n                  //通过编程式导航跳转到后台首页,路由地址为/home\n\n\n                  _this.$router.push('/home');\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }),\n    // 表单切换功能\n    Registered_button: function Registered_button() {\n      $(\".Login_div\").animate({\n        width: \"0\",\n        opacity: \"0\"\n      });\n      $(\".Registered_div\").animate({\n        width: \"50%\",\n        opacity: \"1\"\n      });\n      $(\"#Switch_Registered\").animate({\n        opacity: \"0\"\n      });\n      $(\"#Switch_Login\").animate({\n        opacity: \"1\"\n      });\n      $(\"#Switch_Registered\").slideUp();\n      $(\"#Switch_Login\").slideDown();\n    },\n    // 表单切换功能\n    Login_button: function Login_button() {\n      $(\".Registered_div\").animate({\n        width: \"0\",\n        opacity: \"0\"\n      });\n      $(\".Login_div\").animate({\n        width: \"50%\",\n        opacity: \"1\"\n      });\n      $(\"#Switch_Login\").animate({\n        opacity: \"0\"\n      });\n      $(\"#Switch_Registered\").animate({\n        opacity: \"1\"\n      });\n      $(\"#Switch_Login\").slideUp();\n      $(\"#Switch_Registered\").slideDown(500);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACAA,MADA,kBACA;AACA;AACA;AACAC;AACAC,oBADA;AAEAC;AAFA,OAFA;AAMA;AACAC;AACAF,oBADA;AAEAC,oBAFA;AAGAE;AAHA,OAPA;AAYA;AACAC;AACA;AACAJ,mBACA;AAAAK;AAAAC;AAAAC;AAAA,SADA,EAEA;AACAC,gBADA;AAEAC,iBAFA;AAGAH,mCAHA;AAIAC;AAJA,SAFA,CAFA;AAWA;AACAN,mBACA;AAAAI;AAAAC;AAAAC;AAAA,SADA,EAEA;AACAC,gBADA;AAEAC,iBAFA;AAGAH,mCAHA;AAIAC;AAJA,SAFA;AAZA;AAbA;AAoCA,GAtCA;AAuCAG;AACA;AACAC,SAFA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAEA;AAAA;;AACAC;AACA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBACAC,KADA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,yBAKA,+CALA;;AAAA;AAAA;AAKAC,qBALA,yBAKAhB,IALA;;AAAA,sBAMAgB,WANA;AAAA;AAAA;AAAA;;AAAA,mDAOA,4BAPA;;AAAA;AASA,iDATA,CAUA;AACA;AACA;;;AACA;;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAeA,KAnBA;AAoBA;AACAC,qBArBA,+BAqBA;AACAC;AAAAC;AAAAC;AAAA;AACAF;AAAAC;AAAAC;AAAA;AACAF;AAAAE;AAAA;AACAF;AAAAE;AAAA;AACAF;AACAA;AACA,KA5BA;AA6BA;AACAG,gBA9BA,0BA8BA;AACAH;AAAAC;AAAAC;AAAA;AACAF;AAAAC;AAAAC;AAAA;AACAF;AAAAE;AAAA;AACAF;AAAAE;AAAA;AACAF;AACAA;AACA;AArCA;AAvCA","names":["data","loginForm","username","password","regForm","name","loginFormRules","required","message","trigger","min","max","methods","login","console","valid","res","Registered_button","$","width","opacity","Login_button"],"sourceRoot":"src/components/login","sources":["loginUser.vue"],"sourcesContent":["<template>\n\n  <body>\n    <h2 class=\"title\">好医生在线预约问诊网站</h2>\n    <div class=\"main\">\n      <div class=\"Login_div\">\n        <el-form ref=\"loginFormRef\" class=\"login_form\" :model=\"loginForm\" :rules=\"loginFormRules\">\n          <h1>登录</h1>\n          <span>请登录您的账号</span>\n          <div class=\"eneter\">\n            <el-form-item prop=\"username\">\n              <el-input prefix-icon=\"el-icon-user\" v-model=\"loginForm.username\"></el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n              <el-input prefix-icon=\"el-icon-goods\" v-model=\"loginForm.password\" type=\"password\"></el-input>\n            </el-form-item>\n          </div>\n          <a href=\"#\">忘记密码？</a>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"login\" class=\"submit_button\">登录</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"Options_div\">\n        <div id=\"Switch_Registered\">\n          <h1>还没有账号？</h1>\n          <p>立即注册，和我们一起开始旅程吧</p>\n          <button id=\"Registered_button\" @click=\"Registered_button\">前往注册</button>\n        </div>\n        <div id=\"Switch_Login\">\n          <h1>已有账号？</h1>\n          <p>请使用您的帐号进行登录</p>\n          <button id=\"Login_button\" @click=\"Login_button\">前往登录</button>\n        </div>\n      </div>\n      <div class=\"Registered_div\">\n        <el-form ref=\"loginFormRef\" class=\"login_form\" :model=\"regForm\" :rules=\"loginFormRules\">\n          <h1>注册</h1>\n          <span>注册您的第一个账号</span>\n          <div class=\"eneter\">\n            <el-form-item prop=\"username\">\n              <el-input prefix-icon=\"el-icon-user\" v-model=\"regForm.username\" placeholder=\"请输入注册用户名\"></el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n              <el-input prefix-icon=\"el-icon-goods\" v-model=\"regForm.password\" type=\"password\" placeholder=\"请输入注册密码\">\n              </el-input>\n            </el-form-item>\n            <el-form-item prop=\"username\">\n              <el-input prefix-icon=\"el-icon-s-custom\" v-model=\"regForm.name\" placeholder=\"姓名\">\n              </el-input>\n            </el-form-item>\n          </div>\n          <button class=\"submit_button\">注册</button>\n        </el-form>\n      </div>\n    </div>\n  </body>\n</template>\n\n\n<script>\nimport $ from 'jquery';\nexport default {\n  data() {\n    return {\n      //这是登录表单的数据绑定对象\n      loginForm: {\n        username: '',\n        password: '',\n      },\n      // 注册表单的数据绑定对象\n      regForm: {\n        username: '',\n        password: '',\n        name: ''\n      },\n      ////表单验证规则对象,数据的校验规则\n      loginFormRules: {\n        //验证用户名是否合法\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          {\n            min: 3,\n            max: 10,\n            message: '长度在 3 到 10 个字符',\n            trigger: 'blur',\n          },\n        ],\n        //验证密码是否合法\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          {\n            min: 6,\n            max: 15,\n            message: '长度在 6 到 15 个字符',\n            trigger: 'blur',\n          },\n        ],\n      },\n    }\n  },\n  methods: {\n    //登录按钮表单预验证\n    login() {\n      console.log(login);\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (!valid) {\n          return\n        }\n        //发送请求,发生Promise解决方案把参数变成异步,该参数等待即可\n        const { data: res } = await this.$http.post( 'user/login', this.loginForm  )\n        if (!res.success) {\n          return this.$message.error('登录失败')\n        }\n        this.$message.success('登录成功')\n        //保存到sessionStroge中,当前浏览器打开时候生效\n        // window.sessionStorage.setItem('token', res.message)\n        //通过编程式导航跳转到后台首页,路由地址为/home\n        this.$router.push('/home')\n      })\n    },\n    // 表单切换功能\n    Registered_button() {\n      $(\".Login_div\").animate({ width: \"0\", opacity: \"0\" });\n      $(\".Registered_div\").animate({ width: \"50%\", opacity: \"1\" });\n      $(\"#Switch_Registered\").animate({ opacity: \"0\" });\n      $(\"#Switch_Login\").animate({ opacity: \"1\" });\n      $(\"#Switch_Registered\").slideUp();\n      $(\"#Switch_Login\").slideDown();\n    },\n    // 表单切换功能\n    Login_button() {\n      $(\".Registered_div\").animate({ width: \"0\", opacity: \"0\" });\n      $(\".Login_div\").animate({ width: \"50%\", opacity: \"1\" });\n      $(\"#Switch_Login\").animate({ opacity: \"0\" });\n      $(\"#Switch_Registered\").animate({ opacity: \"1\" });\n      $(\"#Switch_Login\").slideUp();\n      $(\"#Switch_Registered\").slideDown(500);\n    }\n\n\n  },\n}\n</script>\n\n\n<style lang=\"less\" scoped>\n* {\n  box-sizing: border-box;\n}\ndiv {\n  display: block;\n}\nbody {\n  // background: url(../../assets/logo.png) no-repeat center center;\n  background-size: cover;\n  background-attachment: fixed;\n  // background: linear-gradient(antiquewhite, rgb(135, 199, 185));\n}\nbutton {\n  outline: none;\n}\nh1 {\n  font-weight: bold;\n  margin-top: 15%;\n}\nform {\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  padding: 0 50px;\n  height: 100%;\n  text-align: center;\n}\ninput {\n  background: #eee;\n  border: none;\n  padding: 12px 15px;\n  margin: 8px 0;\n  width: 100%;\n  outline: none;\n}\na {\n  color: black;\n  font-size: 15px;\n  text-decoration: none;\n  margin: 20px 0;\n}\n.main {\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n  position: relative;\n  display: flex;\n  overflow: hidden;\n  width: 800px;\n  height: 480px;\n  max-width: 100%;\n  min-height: 480px;\n  margin: 0 auto;\n  top: calc(50% - 240px);\n}\n.title {\n  width: 30%;\n  position: absolute;\n  top: 10%;\n  left: calc(43%);\n  margin-top: 0;\n}\n.Login_div {\n  background: #fff;\n  width: 50%;\n  height: 100%;\n  opacity: 1;\n  text-align: center;\n}\n.Options_div {\n  background: #fff;\n  background-color: #ff445e;\n  width: 50%;\n  height: 100%;\n  color: #fff;\n  text-align: center;\n}\n.Options_div h1 {\n  margin: 30% 0 30px 0;\n}\n.Options_div span {\n  font-size: 15px;\n  letter-spacing: 1px;\n}\n.Options_div button {\n  background: transparent;\n  border: 1px solid #fff;\n  border-radius: 20px;\n  color: #fff;\n  font-size: 12px;\n  font-weight: bold;\n  padding: 12px 45px;\n  letter-spacing: 5px;\n  margin-top: 8%;\n}\n.Registered_div {\n  background: #fff;\n  width: 0;\n  height: 100%;\n  opacity: 0;\n}\n.Registered_div .submit_button {\n  margin-top: 5%;\n}\n.eneter {\n  margin-top: 10%;\n}\n.submit_button {\n  border-radius: 20px;\n  border: 1px solid #ff4b2b;\n  background: #ff4b2b;\n  color: #fff;\n  font-size: 12px;\n  font-weight: bold;\n  padding: 12px 45px;\n  letter-spacing: 5px;\n}\n#Switch_Registered {\n  width: 100%;\n  height: 100%;\n  opacity: 1;\n}\n#Switch_Login {\n  width: 100%;\n  height: 100%;\n  display: none;\n  opacity: 0;\n}\n</style>"]},"metadata":{},"sourceType":"module"}